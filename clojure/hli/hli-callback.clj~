(in-ns 'hli-parse)
(clojure/refer 'clojure)
;; (clojure/refer 'binary-structure)

(def *callbacks* (ref {}))

(defn callback [id data]
  #^{:doc "looks up function to apply arguments to in *callbacks* map"}
  (print "needs to be written"))

(defn add-callback [id fn]
  #^{:doc "adds call back functions to *callbacks* map"}
  (let [functions (get @*callbacks* id)]
    (if (nil? functions)
      (ref-set *callbacks* (assoc @*callbacks* id '(fn)))
      (print "not written yet :("))))